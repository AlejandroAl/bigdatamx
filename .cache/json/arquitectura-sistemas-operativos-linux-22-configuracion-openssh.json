{
    "data": {
        "markdownRemark": {
            "html": "<h2>22. Configuración Openssh</h2>\n<h3>SSH :</h3>\n<p>SSH (Secure Shell) es un conjunto de estándares y protocolo de red que permite establecer una comunicación a través de un canal seguro entre un cliente local y un servidor remoto.\nPara esto utiliza una llave para autenticar el servidor remoto, además utiliza criptografía para la integridad en la transferencia de los datos.</p>\n<p>El puerto por defecto para conectarse es el 22.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code>Comando para conectarse a un servidor por medio del SSH :\n\n# ssh usuario@nombre.o.ip.servidor\n\nSi se utiliza un puerto diferente del 22, solo se pone el parámetro -p , que hace referencia al puerto.\n\n# ssh -p 52341 juan@192.168.70.99</code></pre>\n      </div>\n<h3>SFTP :</h3>\n<p>SFTP (SSH File Transfer Protocol) es un protocolo que provee funcionalidad de transferencia y manipulación de archivos a través de un flujo confiable de datos. </p>\n<p>Para acceder a través de SFTP hacia el servidor, ejecute sftp desde el sistema cliente definiendo el usuario a utilizar, una arroba y el nombre o dirección IP del servidor remoto:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code>Comando :\n\n# sftp usuario@servidor\n\n\n\nSi se utiliza otro puerto distinto al 22, solo se agregan unos parámetros en el comando :\n\nsftp -o Port=52341 juan@192.168.70.99\n# </code></pre>\n      </div>\n<p>En algunas distribuciones ubuntu que utilicen el Sistema de administración de Ficheros Nautilus, este puede acceder al servidor vía URL :</p>\n<p><img src=\"http://www.alcancelibre.org/images/nautilus-sftp.png\" alt=\"Nautilus \"></p>\n<h3>SCP :</h3>\n<p>SCP (Secure Copy o Copia Segura) es una protocolo seguro para transferir archivos entre un anfitrión local y otro remoto, a través de SSH.</p>\n<p>Es decir es una herramienta para copiar archivos de un servidor local a uno remoto, solo utiliza cómo parámetros las direcciones ip, y el usuario, además los datos son cifrados durante la transferencia .</p>\n<p>Parámetros que se pueden incluir :</p>\n<ul>\n<li>-p (minúscula)\nPreserva el tiempo de modificación, tiempos de acceso y los modos del archivo original.</li>\n<li>-P (mayúscula)\nEspecifica el puerto para realizar la conexión.</li>\n<li>-r\nCopia en modo descendente de los directorios especificados.</li>\n</ul>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code>Comando scp :\n\nscp file  user@host:/path/   =  Copia un arhivo local a otra máquina(host) con el usuario correspondiente\n\nEjemplos :\n\nscp -p algo.txt fulano@192.168.70.99:~/\n\nscp -rp Mail fulano@192.168.70.99:/home</code></pre>\n      </div>\n<h3>OpenSSH :</h3>\n<p>OpenSSH (Open Secure Shell) es una alternativa de código fuente abierto, para utilizar ssh.</p>\n<p>OpenSSH incluye servicio y clientes para los protocolos SSH, SFTP y SCP.</p>\n<h4>Instalar OpenSSh :</h4>\n<ul>\n<li>Centos, Red Hat, Fedora :</li>\n</ul>\n<p><code>yum -y install openssh openssh-server openssh-clients</code></p>\n<ul>\n<li>Ubuntu, Debian :</li>\n</ul>\n<p><code>sudo apt-get install openssh-server</code></p>\n<h4>Utilizar OpenSSH como servicio :</h4>\n<ul>\n<li>Comandos :</li>\n</ul>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code>Ver el estado del servicio SSH :\n\nsudo service ssh status\n\n\n\nIniciar el Servicio SSH :\n\nsudo service ssh start\n\n\n\nParar el Servicio SSH :\n\nsudo service ssh stop\n\n\n\nReiniciar el Servicio SSH :\n\nsudo service ssh restart</code></pre>\n      </div>\n<p>Para manejar los servicios se puede utilizar el :  service o si no también se puede utilizar :  systemctl.</p>\n<h3>Configuración del Firewall para SSH :</h3>\n<p>Si se está utilizando el firewall es necesario abrir los puertos que utiliza SSh :</p>\n<ul>\n<li>\n<p>Ejecute lo siguiente:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code>iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT</code></pre>\n      </div>\n</li>\n<li>\n<p>Guarde los cambios ejecutando lo siguiente:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code>service iptables save</code></pre>\n      </div>\n</li>\n<li>\n<p>De otra manera se pude configurar el siguiente archivo /etc/sysconfig/iptables, solo se debe de agregar:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code>-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT</code></pre>\n      </div>\n</li>\n<li>\n<p>Y reinicie el servicio iptables:</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-none\"><code>service iptables restart</code></pre>\n      </div>\n</li>\n</ul>\n<h3>Archivos de configuración :</h3>\n<ul>\n<li>\n<p>/etc/ssh/sshd_config :\nArchivo principal de configuración del servidor SSH.</p>\n</li>\n<li>\n<p>/etc/ssh/ssh_config :\nArchivo principal de configuración de los clientes SSH utilizados desde el anfitrión local.</p>\n</li>\n<li>\n<p>~/.ssh/config :\nArchivo personal para cada usuario, que almacena la configuración utilizada por los clientes SSH utilizados desde el anfitrión local. Permite al usuario local utilizar una configuración distinta a la definida en el archivo /etc/ssh/ssh_config.</p>\n</li>\n<li>\n<p>~/.ssh/known_hosts :\nArchivo personal para cada usuario, el cual almacena las firmas digitales de los servidores SSH a los que se conectan los clientes. </p>\n</li>\n<li>\n<p>~/.ssh/authorized_keys :\nArchivo personal para cada usuario, el cual almacena los certificados de los clientes SSH, para permitir autenticación hacia servidores SSH sin requerir contraseña.</p>\n</li>\n</ul>\n<h3>Configuración de Seguridad para SSH :</h3>\n<p>Estas configuraciones son el el archivo sshd_config . </p>\n<ul>\n<li>\n<p>Cambiar el puerto por defecto que es el 22 : <code>Port 22445</code></p>\n</li>\n<li>\n<p>Bloquear el acceso root en las conexiones remotas : <code>PermitRootLogin no</code></p>\n</li>\n<li>\n<p>LoginGraceTime: Estableceremos el tiempo necesario para introducir la contraseña : <code>LoginGraceTime 30</code></p>\n</li>\n<li>\n<p>MaxAuthTries: Número de intentos permitidos al introducir la contraseña antes de desconectarnos : <code>MaxAuthTries 3</code></p>\n</li>\n</ul>\n<ul>\n<li>\n<p>MaxStartups: Número de logins simultáneos desde una IP : <code>MaxStartups 3</code></p>\n</li>\n<li>\n<p>AllowUsers: Es crear una lista blanca de usuario. Este parámetro nos permite configurar los usuarios que podrán conectarse : <code>AllowUsers user1 user2</code></p>\n</li>\n<li>\n<p>DenyUsers: Se crea una lista negra. Los usuarios que tengamos aquí no podrán conectarse : \t<code>DenyUsers user1 user2</code></p>\n</li>\n<li>\n<p>AllowGroups/DenyUsers: Se crean listas pero en lugar de usuarios son de grupos.</p>\n</li>\n</ul>\n<h4>Para más información:</h4>\n<!-- Please add any articles you think might be helpful to read before writing the article -->\n<ul>\n<li>\n<p>Configuración de OpenSSH :   <a href='http://www.alcancelibre.org/staticpages/index.php/10-como-openssh' target='_blank' rel='nofollow'>http://www.alcancelibre.org/staticpages/index.php/10-como-openssh</a></p>\n</li>\n<li>\n<p>Instalar OpenSSH :\n<a href='http://ubuntuhandbook.org/index.php/2016/04/enable-ssh-ubuntu-16-04-lts/' target='_blank' rel='nofollow'>http://ubuntuhandbook.org/index.php/2016/04/enable-ssh-ubuntu-16-04-lts/</a> </p>\n</li>\n<li>\n<p>Archivos de Configuración :\n<a href='http://web.mit.edu/rhel-doc/4/RH-DOCS/rhel-rg-es-4/s1-ssh-configfiles.html' target='_blank' rel='nofollow'>http://web.mit.edu/rhel-doc/4/RH-DOCS/rhel-rg-es-4/s1-ssh-configfiles.html</a> </p>\n</li>\n<li>\n<p>Configuración de Seguridad SSH :\n<a href='https://www.redeszone.net/seguridad-informatica/servidor-ssh-en-linux-manual-de-configuracion-para-maxima-seguridad/' target='_blank' rel='nofollow'>https://www.redeszone.net/seguridad-informatica/servidor-ssh-en-linux-manual-de-configuracion-para-maxima-seguridad/</a> </p>\n</li>\n</ul>",
            "fields": {
                "slug": "/arquitectura-sistemas-operativos-linux/22-configuracion-openssh/"
            },
            "frontmatter": {
                "title": "22. Configuración Openssh"
            }
        }
    },
    "pathContext": {
        "slug": "/arquitectura-sistemas-operativos-linux/22-configuracion-openssh/"
    }
}